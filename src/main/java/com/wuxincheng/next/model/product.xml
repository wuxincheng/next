<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="Product">
  <typeAlias alias="Product" type="com.wuxincheng.next.model.Product" />

  <resultMap class="Product" id="ProductMapping">
    <result property="prodid" column="prodid" />
    <result property="prodName" column="prodname" />
    <result property="prodUrl" column="produrl" />
    <result property="memo" column="memo" />
    <result property="likeSum" column="likesum" />
    <result property="commentSum" column="commentsum" />
    <result property="prodState" column="prodstate" />
    <result property="postDate" column="postdate" />
    <result property="postDateTime" column="postdatetime" />
    <result property="userid" column="userid" />
  </resultMap>
  
  <select id="queryDetailByProdid" parameterClass="java.lang.String" resultMap="ProductMapping">
    SELECT t.* FROM t_next_product t WHERE t.prodid = #prodid#
  </select>
  
  <select id="queryByPostDate" resultMap="ProductMapping" parameterClass="java.lang.String">
    SELECT t.* FROM t_next_product t WHERE t.postdate = #queryPostDate# ORDER BY t.postDateTime DESC
  </select>
  
  <select id="queryGroupByDate" resultClass="java.lang.String">
    SELECT t.postdate FROM t_next_product t GROUP BY t.postdate ORDER BY t.postdate DESC
  </select>

  <insert id="post" parameterClass="Product">
    INSERT INTO t_next_product(prodname, produrl, memo, likesum, commentsum, prodstate, postdate, postdatetime, userid)
    VALUES (#prodName#, #prodUrl#, #memo#, #likeSum#, #commentSum#, #prodState#, #postDate#, #postDateTime#, #userid#)
  </insert>

</sqlMap>